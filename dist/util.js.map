{"version":3,"file":"util.js","sourceRoot":"","sources":["../framework/util.ts"],"names":[],"mappings":"AAkBA,MAAM,UAAU,gBAAgB,CAC9B,WAAkC;IAElC,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,EAAE;QAClC,MAAM,OAAO,GAAG,UAAU,CAAC,KAAM,CAAC;QAClC,UAAU,CAAC,KAAK,GAAG,KAAK,WAAU,GAAG,IAAW;YAC9C,MAAM,SAAS,GAAO,MAAc,CAAC,SAAS,CAAC;YAC/C,CAAC,MAAM,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,EAAE,SAAS,CAAC,CAAQ,CAAC;QACrE,CAAC,CAAC;QACF,OAAO,UAAU,CAAC;IACpB,CAAC,CAAC;AACJ,CAAC;AAED,MAAM,CAAC,MAAM,QAAQ,GAAG,GAAG,EAAE,CAC3B,OAAO,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,MAAM,KAAK,WAAW,CAAC;AAE1E,MAAM,CAAC,MAAM,gBAAgB,GAAG,sBAAsB,CAAC;AAEvD,MAAM,CAAC,MAAM,kBAAkB,GAAG,kCAAkC,CAAC;AAErE,MAAM,CAAC,MAAM,eAAe,GAAG,+BAA+B,CAAC;AAE/D,MAAM,CAAC,MAAM,oBAAoB,GAAG,iCAAiC,CAAC","sourcesContent":["import { StateView } from \"./type\";\n\ndeclare const process: any;\ndeclare const window: any;\n\ntype ActionHandler = (...args: any[]) => any;\n\ntype HandlerDecorator = (\n  target: object,\n  name: string | symbol,\n  descriptor: TypedPropertyDescriptor<ActionHandler>\n) => TypedPropertyDescriptor<ActionHandler>;\n\ntype HandlerInterceptor<S> = (\n  handler: ActionHandler,\n  state: Readonly<S>\n) => any;\n\nexport function handlerDecorator<S extends StateView>(\n  interceptor: HandlerInterceptor<S>\n): HandlerDecorator {\n  return (target, name, descriptor) => {\n    const handler = descriptor.value!;\n    descriptor.value = async function(...args: any[]) {\n      const rootState: S = (target as any).rootState;\n      (await interceptor(handler.bind(this, ...args), rootState)) as any;\n    };\n    return descriptor;\n  };\n}\n\nexport const isServer = () =>\n  process && typeof process === \"object\" && typeof window === \"undefined\";\n\nexport const SET_STATE_ACTION = \"@@framework/setState\";\n\nexport const SET_HELPER_LOADING = \"@@framework/setHelper/setLoading\";\n\nexport const SET_HELPER_LANG = \"@@framework/setHelper/setLang\";\n\nexport const SET_HELPER_EXCEPTION = \"@@framework/setHelper/exception\";\n"]}