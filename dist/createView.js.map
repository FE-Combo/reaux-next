{"version":3,"file":"createView.js","sourceRoot":"","sources":["../framework/createView.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAG1B;;;;GAIG;AACH,MAAM,UAAU,UAAU,CACxB,OAAU,EACV,SAAmC;IAEnC,OAAO,MAAM,IAAwB,SAAQ,KAAK,CAAC,aAAgB;QACjE,MAAM,CAAC,KAAK,CAAC,eAAe,CAAC,OAAY;YACvC,OAAO,MAAM,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACxC,CAAC;QAED,iBAAiB;YACf,OAAO,CAAC,MAAM,EAAE,CAAC;QACnB,CAAC;QAED,kBAAkB;YAChB,OAAO,CAAC,MAAM,EAAE,CAAC;QACnB,CAAC;QAED,oBAAoB;YAClB,OAAO,CAAC,QAAQ,EAAE,CAAC;QACrB,CAAC;QAED,MAAM;YACJ,OAAO,oBAAC,SAAS,oBAAK,IAAI,CAAC,KAAK,EAAI,CAAC;QACvC,CAAC;KACF,CAAC;AACJ,CAAC","sourcesContent":["import React from \"react\";\nimport { BaseModel } from \"./type\";\n\n/**\n * Create Component and proxy component lifecycle\n * @param handler\n * @param Component\n */\nexport function createView<H extends BaseModel>(\n  handler: H,\n  Component: React.ComponentType<any>\n) {\n  return class View<P extends {} = {}> extends React.PureComponent<P> {\n    static async getInitialProps(context: any) {\n      return await handler.onReady(context);\n    }\n\n    componentDidMount() {\n      handler.onLoad();\n    }\n\n    componentDidUpdate() {\n      handler.onLoad();\n    }\n\n    componentWillUnmount() {\n      handler.onUnload();\n    }\n\n    render() {\n      return <Component {...this.props} />;\n    }\n  };\n}\n"]}